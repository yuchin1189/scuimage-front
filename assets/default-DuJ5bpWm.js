import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{p as $,r as O,s as M,c as u,a as ue,w as L,o as ie,b as ce,m as Q,g as j,u as de,d as X,e as ee,t as F,f as U,h as s,i as R,j as te,k as ve,l as ae,n as me,q as fe,v as le,x as ge,y as he,z as ye,A as pe,B as be,C as ke,D as Ce,E as Se,F as _e,G as we,H as Ve,I as oe,J as v,K as B,L as l,M as w,V as E,N as p,O as S,P as C,Q as V,R as x,S as D,T as xe,U as Be,W as Me,X as Ie,Y as Pe,Z as Te,_ as T,$ as Le,a0 as H,a1 as Y,a2 as He}from"./index-DFLJ4UxI.js";import{V as se,a as W,b as A}from"./VRow-B9BOWsk7.js";import{m as Ae,u as ne,V as Z,a as J,b as K,c as N}from"./VMenu-C3l7npyE.js";import"./VDivider-Dicnoa_2.js";const Re=$({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Fe(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:o}=i;let m=0,c=0;const t=O(null),r=M(0),d=M(0),b=M(0),k=M(!1),g=M(!1),h=u(()=>Number(e.scrollThreshold)),_=u(()=>ue((h.value-r.value)/h.value||0)),y=()=>{const n=t.value;if(!n||o&&!o.value)return;m=r.value,r.value="window"in n?n.pageYOffset:n.scrollTop;const f=n instanceof Window?document.documentElement.scrollHeight:n.scrollHeight;if(c!==f){c=f;return}g.value=r.value<m,b.value=Math.abs(r.value-h.value)};return L(g,()=>{d.value=d.value||r.value}),L(k,()=>{d.value=0}),ie(()=>{L(()=>e.scrollTarget,n=>{var I;const f=n?document.querySelector(n):window;f&&f!==t.value&&((I=t.value)==null||I.removeEventListener("scroll",y),t.value=f,t.value.addEventListener("scroll",y,{passive:!0}))},{immediate:!0})}),ce(()=>{var n;(n=t.value)==null||n.removeEventListener("scroll",y)}),o&&L(o,y,{immediate:!0}),{scrollThreshold:h,currentScroll:r,currentThreshold:b,isScrollActive:k,scrollRatio:_,isScrollingUp:g,savedScroll:d}}const Ee=$({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Ae(),...Q(),...Re(),height:{type:[Number,String],default:64}},"VAppBar"),$e=j()({name:"VAppBar",props:Ee(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:o}=i;const m=O(),c=de(e,"modelValue"),t=u(()=>{var P;const a=new Set(((P=e.scrollBehavior)==null?void 0:P.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),r=u(()=>{const a=t.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!c.value}),{currentScroll:d,scrollThreshold:b,isScrollingUp:k,scrollRatio:g}=Fe(e,{canScroll:r}),h=u(()=>t.value.hide||t.value.fullyHide),_=u(()=>e.collapse||t.value.collapse&&(t.value.inverted?g.value>0:g.value===0)),y=u(()=>e.flat||t.value.fullyHide&&!c.value||t.value.elevate&&(t.value.inverted?d.value>0:d.value===0)),n=u(()=>t.value.fadeImage?t.value.inverted?1-g.value:g.value:void 0),f=u(()=>{var q,G;if(t.value.hide&&t.value.inverted)return 0;const a=((q=m.value)==null?void 0:q.contentHeight)??0,P=((G=m.value)==null?void 0:G.extensionHeight)??0;return h.value?d.value<b.value||t.value.fullyHide?a+P:a:a+P});X(u(()=>!!e.scrollBehavior),()=>{te(()=>{h.value?t.value.inverted?c.value=d.value>b.value:c.value=k.value||d.value<b.value:c.value=!0})});const{ssrBootStyles:I}=ne(),{layoutItemStyles:z}=ee({id:e.name,order:u(()=>parseInt(e.order,10)),position:F(e,"location"),layoutSize:f,elementSize:M(void 0),active:c,absolute:F(e,"absolute")});return U(()=>{const a=Z.filterProps(e);return s(Z,R({ref:m,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...z.value,"--v-toolbar-image-opacity":n.value,height:void 0,...I.value},e.style]},a,{collapse:_.value,flat:y.value}),o)}),{}}}),ze=$({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...ve(),...ae(),...me(),...Q(),...fe(),...le({tag:"footer"}),...ge()},"VFooter"),Ne=j()({name:"VFooter",props:ze(),setup(e,i){let{slots:o}=i;const m=O(),{themeClasses:c}=he(e),{backgroundColorClasses:t,backgroundColorStyles:r}=ye(F(e,"color")),{borderClasses:d}=pe(e),{elevationClasses:b}=be(e),{roundedClasses:k}=ke(e),g=M(32),{resizeRef:h}=Ce(y=>{y.length&&(g.value=y[0].target.clientHeight)}),_=u(()=>e.height==="auto"?g.value:parseInt(e.height,10));return X(()=>e.app,()=>{const y=ee({id:e.name,order:u(()=>parseInt(e.order,10)),position:u(()=>"bottom"),layoutSize:_,elementSize:u(()=>e.height==="auto"?void 0:_.value),active:u(()=>e.app),absolute:F(e,"absolute")});te(()=>{m.value=y.layoutItemStyles.value})}),U(()=>s(e.tag,{ref:h,class:["v-footer",c.value,t.value,d.value,b.value,k.value,e.class],style:[r.value,e.app?m.value:{height:Se(e.height)},e.style]},o)),{}}}),De=$({scrollable:Boolean,...ae(),..._e(),...le({tag:"main"})},"VMain"),Oe=j()({name:"VMain",props:De(),setup(e,i){let{slots:o}=i;const{dimensionStyles:m}=we(e),{mainStyles:c}=Ve(),{ssrBootStyles:t}=ne();return U(()=>s(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[c.value,t.value,m.value,e.style]},{default:()=>{var r,d;return[e.scrollable?s("div",{class:"v-main__scroller"},[(r=o.default)==null?void 0:r.call(o)]):(d=o.default)==null?void 0:d.call(o)]}})),{}}}),je={class:"d-flex"},Ue=["href","title"],qe={class:"text-caption text-disabled text-center"},Ge={__name:"AppFooter",setup(e){const i=oe(),o=u(()=>i.xs.value),m=[{title:"Vuetify Documentation",icon:"$vuetify",href:"https://vuetifyjs.com/"},{title:"scuimage IG",icon:"mdi-instagram",href:"https://www.instagram.com/scu_image/"},{title:"scuimage FB",icon:"mdi-facebook",href:"https://www.facebook.com/scuimage/"},{title:"Vuetify GitHub",icon:"mdi-github",href:"https://github.com/vuetifyjs/vuetify"},{title:"scuimage Discord",icon:["M22,24L16.75,19L17.38,21H4.5A2.5,2.5 0 0,1 2,18.5V3.5A2.5,2.5 0 0,1 4.5,1H19.5A2.5,2.5 0 0,1 22,3.5V24M12,6.8C9.32,6.8 7.44,7.95 7.44,7.95C8.47,7.03 10.27,6.5 10.27,6.5L10.1,6.33C8.41,6.36 6.88,7.53 6.88,7.53C5.16,11.12 5.27,14.22 5.27,14.22C6.67,16.03 8.75,15.9 8.75,15.9L9.46,15C8.21,14.73 7.42,13.62 7.42,13.62C7.42,13.62 9.3,14.9 12,14.9C14.7,14.9 16.58,13.62 16.58,13.62C16.58,13.62 15.79,14.73 14.54,15L15.25,15.9C15.25,15.9 17.33,16.03 18.73,14.22C18.73,14.22 18.84,11.12 17.12,7.53C17.12,7.53 15.59,6.36 13.9,6.33L13.73,6.5C13.73,6.5 15.53,7.03 16.56,7.95C16.56,7.95 14.68,6.8 12,6.8M9.93,10.59C10.58,10.59 11.11,11.16 11.1,11.86C11.1,12.55 10.58,13.13 9.93,13.13C9.29,13.13 8.77,12.55 8.77,11.86C8.77,11.16 9.28,10.59 9.93,10.59M14.1,10.59C14.75,10.59 15.27,11.16 15.27,11.86C15.27,12.55 14.75,13.13 14.1,13.13C13.46,13.13 12.94,12.55 12.94,11.86C12.94,11.16 13.45,10.59 14.1,10.59Z"],href:"https://discord.gg/"}];return(c,t)=>(v(),B(Ne,{border:"","max-height":"25vh"},{default:l(()=>[s(se,{class:"h-100 d-flex flex-column justify-space-between"},{default:l(()=>[s(W,null,{default:l(()=>[o.value.valueOf()?C("",!0):(v(),B(A,{key:0,cols:"12",md:"5"},{default:l(()=>[w("h3",null,[s(E,null,{default:l(()=>t[0]||(t[0]=[p("mdi-film")])),_:1}),p(" "+S(c.$t("branding")),1)]),t[1]||(t[1]=w("span",null,"Lorem ipsum dolor sit amet.",-1))]),_:1})),s(A,{cols:"12",md:"5"}),s(A,{cols:"12",md:"2",class:"h-100 d-flex flex-column justify-md-space-between"},{default:l(()=>[w("div",je,[(v(),V(x,null,D(m,r=>w("a",{key:r.title,href:r.href,title:r.title,class:"d-inline-block mx-2 social-link",rel:"noopener noreferrer",target:"_blank"},[s(E,{icon:r.icon,size:16},null,8,["icon"])],8,Ue)),64))]),t[2]||(t[2]=w("a",{class:"text-caption",style:{"text-decoration":"none"},href:""},"111台北市士林區臨溪路70號 綜合大樓 B212室",-1))]),_:1})]),_:1}),s(W,null,{default:l(()=>[s(A,{class:"d-flex flex-column justify-end"},{default:l(()=>[w("div",qe,[p(" © 1989-"+S(new Date().getFullYear())+" ",1),t[3]||(t[3]=w("span",{class:"d-none d-sm-inline-block"},"東吳大學溪城攝影學會",-1)),t[4]||(t[4]=p(" — ")),t[5]||(t[5]=w("a",{class:"text-decoration-none on-surface",href:"",rel:"noopener noreferrer",target:"_top"}," 版權所有 ",-1))])]),_:1})]),_:1})]),_:1})]),_:1}))}},Ye=re(Ge,[["__scopeId","data-v-7ab9ab21"]]),Xe={__name:"default",setup(e){const{t:i}=xe(),o=Be(),{apiAuth:m}=He(),c=Me(),t=oe(),r=Ie(),d=[{to:"/equipment",text:i("nav.resourceMenu.equipment"),value:"equipment"},{to:"/lab",text:i("nav.resourceMenu.lab"),value:"lab"}],b=u(()=>[{key:"login",to:"/login",text:i("nav.userMenu.login"),show:!o.isLoggedIn},{key:"register",to:"/register",text:i("nav.userMenu.register"),show:!o.isLoggedIn},{key:"resetPassword",text:i("nav.userMenu.resetPassword"),show:o.isLoggedIn},{key:"logout",text:i("nav.userMenu.logout"),show:o.isLoggedIn}]);let k=localStorage.getItem("theme");k?r.global.name.value=k==="dark"?"dark":"light":k=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";const g=async()=>{try{await m.delete("user/logout")}catch(n){console.log("default.vue logout",n)}o.logout(),c({text:i("logout.success"),snackbarProps:{color:"success",rounded:"pill"}})},h=u(()=>t.xs.value),_=u(()=>o.isAdmin?"bg-brown":"bg-primary");function y(){const n=r.global.current.value.dark?"light":"dark";r.global.name.value=n,localStorage.setItem("theme",n),c({text:i("themeChanged"),snackbarProps:{color:"success",timeout:5e3,rounded:"pill"}})}return(n,f)=>{const I=Pe("router-view"),z=Ye;return v(),V(x,null,[s($e,{class:Te(_.value)},{default:l(()=>[s(se,{class:"d-flex align-center"},{default:l(()=>[s(T,{to:"/",active:!1,"prepend-icon":"mdi-film"},{default:l(()=>[p(S(n.$t("branding")),1)]),_:1}),s(Le),s(J,{"open-on-click":""},{activator:l(({props:a})=>[s(T,R(a,{"prepend-icon":"mdi-format-list-checks"}),{default:l(()=>[h.value.valueOf()?C("",!0):(v(),V(x,{key:0},[p(S(n.$t("nav.resources")),1)],64))]),_:2},1040)]),default:l(()=>[s(K,{class:"bg-main"},{default:l(()=>[(v(),V(x,null,D(d,a=>s(N,{key:a.value,to:a.to,disabled:a.value==="lab"},{default:l(()=>[p(S(a.text),1)]),_:2},1032,["to","disabled"])),64))]),_:1})]),_:1}),s(J,{"open-on-click":""},{activator:l(({props:a})=>[H(o).isAdmin?C("",!0):(v(),B(T,R({key:0},a,{"prepend-icon":"mdi-account"}),{default:l(()=>[h.value.valueOf()?C("",!0):(v(),V(x,{key:0},[p(S(n.$t("nav.member")),1)],64))]),_:2},1040)),H(o).isAdmin?(v(),B(T,R({key:1},a,{"prepend-icon":"mdi-account-wrench"}),{default:l(()=>[h.value.valueOf()?C("",!0):(v(),V(x,{key:0},[p(S(n.$t("nav.admin")),1)],64))]),_:2},1040)):C("",!0)]),default:l(()=>[s(K,{class:"bg-main"},{default:l(()=>[(v(!0),V(x,null,D(b.value,a=>(v(),V(x,{key:a.key},[a.show&&a.key!=="logout"?(v(),B(N,{key:0,to:a.to,disabled:a.key==="resetPassword"},{default:l(()=>[p(S(a.text),1)]),_:2},1032,["to","disabled"])):C("",!0),a.show&&a.key==="logout"?(v(),B(N,{key:1,onClick:f[0]||(f[0]=P=>g())},{default:l(()=>[p(S(n.$t("nav.userMenu.logout")),1)]),_:1})):C("",!0)],64))),128))]),_:1})]),_:1}),s(T,{icon:"",onClick:y},{default:l(()=>[H(Y).theme.name.value==="dark"?(v(),B(E,{key:0},{default:l(()=>f[1]||(f[1]=[p("mdi-brightness-3")])),_:1})):C("",!0),H(Y).theme.name.value==="light"?(v(),B(E,{key:1},{default:l(()=>f[2]||(f[2]=[p("mdi-brightness-7")])),_:1})):C("",!0)]),_:1})]),_:1})]),_:1},8,["class"]),s(Oe,null,{default:l(()=>[s(I)]),_:1}),s(z)],64)}}};export{Xe as default};
