import{T as k,W as C,bJ as P,J as T,K as R,L as t,h as l,M as V,O as b,a0 as e,b9 as E,aV as i,_ as N,N as _,a2 as B}from"./index-aSFu2k1n.js";import{c as F,a as n,e as U,u as A,d as m}from"./index.esm-BtNVjRUw.js";import{v as w}from"./index-pAIsIq_v.js";import{b as h}from"./route-block-B_A1xBdJ.js";import{b as x,a as I,V as L}from"./VRow-BGQ9gRt8.js";import{V as D}from"./VDivider-CH1qRrPb.js";import{V as J}from"./VForm-DyPyDu7V.js";const O={class:"text-center"},j={class:"text-center"},K={__name:"register",setup(W){const{t:a}=k(),{api:y}=B(),v=C(),S=P(),$=F({username:n().required(a("api.usernameRequired")).min(4,a("api.usernameTooShort")).max(30,a("api.usernameTooLong")).test("isAlphanumeric",a("api.usernameInvalid"),s=>w.isAlphanumeric(s)),email:n().required(a("api.userEmailRequired")).test("isEmail",a("api.userEmailInvalid"),s=>w.isEmail(s)),password:n().required(a("api.userPasswordRequired")).min(4,a("api.userPasswordTooShort")).max(20,a("api.userPasswordTooLong")),passwordConfirm:n().required(a("api.userPasswordRequired")).oneOf([U("password")],a("api.userPasswordNotMatch"))}),{handleSubmit:q,isSubmitting:f}=A({validationSchema:$}),d=m("username"),p=m("email"),c=m("password"),g=m("passwordConfirm"),M=q(async s=>{var r,o;try{await y.post("/user",{username:s.username,email:s.email,password:s.password}),v({text:a("register.success"),snackbarProps:{color:"success",rounded:"pill"}}),S.push("/login")}catch(u){console.log("pages/register.vue",u),v({text:a("api."+(((o=(r=u==null?void 0:u.response)==null?void 0:r.data)==null?void 0:o.message)||"unknownError")),snackbarProps:{color:"error",rounded:"pill"}})}});return(s,r)=>(T(),R(L,{class:"mt-lg-5",height:"100vh"},{default:t(()=>[l(I,{class:"justify-center"},{default:t(()=>[l(x,{cols:"12"},{default:t(()=>[V("h1",O,b(s.$t("nav.userMenu.register")),1)]),_:1}),l(D),l(x,{cols:"12",sm:"6",md:"6",lg:"4"},{default:t(()=>[l(J,{disabled:e(f),onSubmit:E(e(M),["prevent"])},{default:t(()=>[l(i,{modelValue:e(d).value.value,"onUpdate:modelValue":r[0]||(r[0]=o=>e(d).value.value=o),"error-messages":e(d).errorMessage.value,label:s.$t("user.username"),minlength:"4",maxlength:"30",counter:""},null,8,["modelValue","error-messages","label"]),l(i,{modelValue:e(p).value.value,"onUpdate:modelValue":r[1]||(r[1]=o=>e(p).value.value=o),"error-messages":e(p).errorMessage.value,label:s.$t("user.email")},null,8,["modelValue","error-messages","label"]),l(i,{modelValue:e(c).value.value,"onUpdate:modelValue":r[2]||(r[2]=o=>e(c).value.value=o),type:"password","error-messages":e(c).errorMessage.value,label:s.$t("user.password"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),l(i,{modelValue:e(g).value.value,"onUpdate:modelValue":r[3]||(r[3]=o=>e(g).value.value=o),type:"password","error-messages":e(g).errorMessage.value,label:s.$t("user.passwordConfirm"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),V("div",j,[l(N,{loading:e(f),type:"submit",color:"primary"},{default:t(()=>[_(b(s.$t("register.submit")),1)]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof h=="function"&&h(K);export{K as default};
